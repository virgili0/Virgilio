<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ChatBots with DialogFlow, Python, and Flask | Virgilio</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="Data Science E-Learning">
    <link rel="preload" href="/Virgilio/assets/css/0.styles.5eb7f54c.css" as="style"><link rel="preload" href="/Virgilio/assets/js/app.3b1af8ac.js" as="script"><link rel="preload" href="/Virgilio/assets/js/2.ca6f3911.js" as="script"><link rel="preload" href="/Virgilio/assets/js/3.c03bce7d.js" as="script"><link rel="preload" href="/Virgilio/assets/js/22.d16fb67a.js" as="script"><link rel="prefetch" href="/Virgilio/assets/js/10.477bca29.js"><link rel="prefetch" href="/Virgilio/assets/js/11.1a41eac0.js"><link rel="prefetch" href="/Virgilio/assets/js/12.aabb7f08.js"><link rel="prefetch" href="/Virgilio/assets/js/13.97b0f407.js"><link rel="prefetch" href="/Virgilio/assets/js/14.ed86b05e.js"><link rel="prefetch" href="/Virgilio/assets/js/15.c270805f.js"><link rel="prefetch" href="/Virgilio/assets/js/16.d5332126.js"><link rel="prefetch" href="/Virgilio/assets/js/17.20521ccf.js"><link rel="prefetch" href="/Virgilio/assets/js/18.225e538a.js"><link rel="prefetch" href="/Virgilio/assets/js/19.05cfaf2b.js"><link rel="prefetch" href="/Virgilio/assets/js/20.567bb486.js"><link rel="prefetch" href="/Virgilio/assets/js/21.2d0e159c.js"><link rel="prefetch" href="/Virgilio/assets/js/23.e1aeb43d.js"><link rel="prefetch" href="/Virgilio/assets/js/24.0543bf42.js"><link rel="prefetch" href="/Virgilio/assets/js/25.5648eeb8.js"><link rel="prefetch" href="/Virgilio/assets/js/26.c40da75e.js"><link rel="prefetch" href="/Virgilio/assets/js/27.79c57f2c.js"><link rel="prefetch" href="/Virgilio/assets/js/28.20d8eff7.js"><link rel="prefetch" href="/Virgilio/assets/js/29.c233cf13.js"><link rel="prefetch" href="/Virgilio/assets/js/30.c210aee2.js"><link rel="prefetch" href="/Virgilio/assets/js/31.5855c954.js"><link rel="prefetch" href="/Virgilio/assets/js/32.983fb4c2.js"><link rel="prefetch" href="/Virgilio/assets/js/33.505f6bb8.js"><link rel="prefetch" href="/Virgilio/assets/js/34.2ebca3bf.js"><link rel="prefetch" href="/Virgilio/assets/js/35.f0cd1d59.js"><link rel="prefetch" href="/Virgilio/assets/js/36.f3510bfc.js"><link rel="prefetch" href="/Virgilio/assets/js/37.9bfbe542.js"><link rel="prefetch" href="/Virgilio/assets/js/38.39ddb227.js"><link rel="prefetch" href="/Virgilio/assets/js/39.f1997790.js"><link rel="prefetch" href="/Virgilio/assets/js/4.1698bf3a.js"><link rel="prefetch" href="/Virgilio/assets/js/40.4e7a68f2.js"><link rel="prefetch" href="/Virgilio/assets/js/41.818a33db.js"><link rel="prefetch" href="/Virgilio/assets/js/42.888e66f7.js"><link rel="prefetch" href="/Virgilio/assets/js/43.35d25628.js"><link rel="prefetch" href="/Virgilio/assets/js/44.91f7da80.js"><link rel="prefetch" href="/Virgilio/assets/js/45.350e9939.js"><link rel="prefetch" href="/Virgilio/assets/js/46.7ad73ea2.js"><link rel="prefetch" href="/Virgilio/assets/js/47.e3a229fb.js"><link rel="prefetch" href="/Virgilio/assets/js/48.18418b91.js"><link rel="prefetch" href="/Virgilio/assets/js/49.7edac891.js"><link rel="prefetch" href="/Virgilio/assets/js/5.0787d894.js"><link rel="prefetch" href="/Virgilio/assets/js/50.ddffb2e9.js"><link rel="prefetch" href="/Virgilio/assets/js/51.46fe4c1b.js"><link rel="prefetch" href="/Virgilio/assets/js/52.f01d6695.js"><link rel="prefetch" href="/Virgilio/assets/js/53.a6056974.js"><link rel="prefetch" href="/Virgilio/assets/js/54.e02af0ad.js"><link rel="prefetch" href="/Virgilio/assets/js/55.881d09f9.js"><link rel="prefetch" href="/Virgilio/assets/js/56.913ef6e1.js"><link rel="prefetch" href="/Virgilio/assets/js/57.6b3c08c3.js"><link rel="prefetch" href="/Virgilio/assets/js/58.23655ab7.js"><link rel="prefetch" href="/Virgilio/assets/js/59.7dc3433d.js"><link rel="prefetch" href="/Virgilio/assets/js/6.5cfdb205.js"><link rel="prefetch" href="/Virgilio/assets/js/60.6c38869d.js"><link rel="prefetch" href="/Virgilio/assets/js/61.378f8c85.js"><link rel="prefetch" href="/Virgilio/assets/js/62.c6137532.js"><link rel="prefetch" href="/Virgilio/assets/js/63.4b1e69f5.js"><link rel="prefetch" href="/Virgilio/assets/js/64.32dec807.js"><link rel="prefetch" href="/Virgilio/assets/js/65.93646797.js"><link rel="prefetch" href="/Virgilio/assets/js/66.fcac9536.js"><link rel="prefetch" href="/Virgilio/assets/js/67.85663438.js"><link rel="prefetch" href="/Virgilio/assets/js/68.f9af92d7.js"><link rel="prefetch" href="/Virgilio/assets/js/69.4ee2a811.js"><link rel="prefetch" href="/Virgilio/assets/js/7.488793c7.js"><link rel="prefetch" href="/Virgilio/assets/js/8.31290db1.js"><link rel="prefetch" href="/Virgilio/assets/js/9.4325b2fb.js">
    <link rel="stylesheet" href="/Virgilio/assets/css/0.styles.5eb7f54c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Virgilio/" class="home-link router-link-active"><!----> <span class="site-name">Virgilio</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/gbdev/pandocs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contribute
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/gbdev/pandocs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contribute
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Virgilio/" class="sidebar-link">What is Virgilio?</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Paradise</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Virgilio/serving/paradiso/demystification-ai-ml-dl.html" class="sidebar-link">Demystification of the key concepts of AI and ML</a></li><li><a href="/Virgilio/serving/paradiso/what-do-i-need-for-ml.html" class="sidebar-link">What do I need to do Machine Learning?</a></li><li><a href="/Virgilio/serving/paradiso/do-you-really-need-ml.html" class="sidebar-link">Do you really need Machine Learning?</a></li><li><a href="/Virgilio/serving/paradiso/use-cases.html" class="sidebar-link">Machine Learning use cases</a></li><li><a href="/Virgilio/serving/paradiso/virgilio-teaching-strategy.html" class="sidebar-link">Learning to Learn</a></li><li><a href="/Virgilio/serving/paradiso/introduction-to-ml.html" class="sidebar-link">Introduction to Machine Learning</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="chatbots-with-dialogflow-python-and-flask"><a href="#chatbots-with-dialogflow-python-and-flask" class="header-anchor">#</a> ChatBots with DialogFlow, Python, and Flask</h1> <h2 id="we-have-99-94847-percent-probability-of-death-luke"><a href="#we-have-99-94847-percent-probability-of-death-luke" class="header-anchor">#</a> We have 99.94847 percent probability of death, Luke</h2> <p>In simple terms, a <a href="https://medium.com/swlh/what-is-a-chatbot-and-how-to-use-it-for-your-business-976ec2e0a99f" target="_blank" rel="noopener noreferrer">Chatbot<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a computer program that simulates human conversation (in the form of texts and audio)
which we would perceive as being intelligent and useful.
Their most important application is personal or enterprise virtual assistants.
Chatbots can <em>dig through huge amounts of data</em> to pick out
the best nugget for a customer, whether it is a troubleshooting solution or a recommendation for a
new product to try. Also, they offer an extremely <em>intuitive interface</em> between your business and your customers.
Depending on the situation, a chatbot can learn from what a user
says to personalize the interaction and build off previous interaction, giving
a <a href="https://mobilemonkey.com/chatbots/chatbot-examples" target="_blank" rel="noopener noreferrer">satisfying and futuristic customer experience<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="why-dialogflow"><a href="#why-dialogflow" class="header-anchor">#</a> Why Dialogflow</h2> <p><a href="https://dialogflow.com/" target="_blank" rel="noopener noreferrer">DialogFlow<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is the beginner-friendly chatbot platform from Google, and albeit there are several platforms out
there (<a href="https://chatbotsmagazine.com/choosing-the-best-chatbot-platform-101-a-beginners-guide-e841b41192c7" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> a cool guide on choosing the right
platforms), DialogFlow has the best tradeoffs in particular for a beginner. <a href="https://chatbotsjournal.com/25-chatbot-platforms-a-comparative-table-aeefc932eaff" target="_blank" rel="noopener noreferrer">Here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> you find
another comparative table.
I've chosen DialogFlow because:</p> <ul><li>Incorporates Google's machine learning expertise and products such as Google Cloud Speech-to-Text.</li> <li>Is a Google service that runs on the Google Cloud Platform, letting you scale to hundreds of millions of users.</li> <li>Is really beginner-friendly, intuitive, and has complete and clear documentation.</li></ul> <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <p>This guide will use <a href="https://www.python.org/" target="_blank" rel="noopener noreferrer">Python<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and his <a href="http://flask.pocoo.org/" target="_blank" rel="noopener noreferrer">Flask<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> lightweight library to let you build a complete and deployable chatbot application. So, if you don't know Python, make yourself a gift and <a href="https://automatetheboringstuff.com/" target="_blank" rel="noopener noreferrer">learn it!<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h1 id="index"><a href="#index" class="header-anchor">#</a> Index</h1> <ul><li><a href="#Learning-DialogFlow">Learning DialogFlow</a> <ul><li><a href="#The-GUI-approach">The GUI approach</a></li> <li><a href="#A-deeper-approach">A deeper approach</a></li> <li><a href="#Our-first-agent">Our first agent</a></li> <li><a href="#Experimenting-the-API">Experimenting the API</a></li></ul></li> <li><a href="#Hands-on-Project">Hands-on Project</a> <ul><li><a href="#Up-and-running-with-Flask-and-webhooks">Up and running with Flask and webhooks</a></li> <li><a href="#Our-agent,-but-with-API-calls">Our agent, but with API calls</a></li> <li><a href="#Handling-webhooks-with-Flask">Handling webhooks with Flask</a></li> <li><a href="#Deploying-our-chatbot">Deploying our chatbot</a></li> <li><a href="#Chatbot-tips-and-best-practices">Chatbot tips and best practices</a></li> <li><a href="#Project-Ideas">Project Ideas</a></li></ul></li></ul> <h2 id="learning-dialogflow"><a href="#learning-dialogflow" class="header-anchor">#</a> Learning DialogFlow</h2> <p>The thing I love about DialogFlow is that's beginner friendly. In fact, the approach  we'll follow to learn how to deploy real chat-bots is the following:</p> <ul><li>A first gentle approach through the Graphical User Interface to understand the concepts (intents, entities, context...)</li> <li>A more &quot;coding&quot; approach, using the Python Client for <a href="https://it.wikipedia.org/wiki/Representational_State_Transfer" target="_blank" rel="noopener noreferrer">RESTful<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> API call to reproduce the same Agent but with code (and not clicks in the GUI).</li> <li>When we're able to build agents with Python API calls, we'll use them to create and End-to-End chatbot project that you'll deploy on several channels (Slack, Facebook, Telegram...)
Let's start!</li></ul> <h3 id="the-gui-approach"><a href="#the-gui-approach" class="header-anchor">#</a> The GUI approach</h3> <p>The first thing I suggest you do is going through the <a href="https://dialogflow.com/docs" target="_blank" rel="noopener noreferrer">official introduction<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and step-by-step tutorial. It will bring you from zero to be able to create an Agent (the single chatbot application) with the GUI.
<a href="https://console.dialogflow.com/api-client/#/login" target="_blank" rel="noopener noreferrer">Here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> you can start to build your agent and follow the steps of the tutorial.
You won't have a problem during this phase, you don't have to code anything, just follow the tutorial up to &quot;Fulfillment&quot;.</p> <h3 id="our-first-agent"><a href="#our-first-agent" class="header-anchor">#</a> Our first agent</h3> <p>If you've followed the guide with attention, you're now able to create a simple chatbot from the GUI.
So let's get our hands dirty and create our first agent!</p> <ul><li>Create a new Agent and develop it from the GUI, until he's able to reproduce this &quot;I'm lost&quot; Intent with FollowUpIntents:</li></ul> <p>Bot: Hi! I'm Virgilio! How can I help you?<br>
Human: Tell me which is the best <em>Data Science</em> project in <em>Italy</em>.<br>
B: Without a doubt, the best project about <em>Data Science</em> in <em>Italy</em> is <em>Virgilio</em>! Do you want to reach it?<br>
H: Yes.<br>
B: Here's the link, you're welcome ðŸ˜ƒ <br>
B: [ ...drops the link ]</p> <p>That's it, for now. Try to reproduce the conversation, you can try your agent from the top-right bar in the GUI.
Notice that you have three entities here. Which ones?
Remember that you can use both system entities (like an hour, date, languages, places...), and custom entities!
When you're done, let's go for the next step!</p> <h3 id="experimenting-the-api"><a href="#experimenting-the-api" class="header-anchor">#</a> Experimenting the API</h3> <p>Now that you're really comfortable with the DialogFlow concepts, we can dive deep down the rabbit hole and et up the environment for developing a chatbot with Python. This will bring us al the power of the code to build and handle a lot of chatbots (and many more things).
Assuming that you have Python3 installed, install the <a href="https://dialogflow-python-client-v2.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener noreferrer">Python SDK<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> going in the folder where you want to put your configuration files, launch a shell and digit:</p> <div class="language- extra-class"><pre class="language-text"><code>pip install dialogflow
</code></pre></div><p>If it doesn't work, maybe is because you have an old installation of Python 2. In that case, digit:</p> <div class="language- extra-class"><pre class="language-text"><code>pip3 install dialogflow
</code></pre></div><p>Now go <a href="https://github.com/googleapis/dialogflow-python-client-v2/tree/master/samples" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and be happy. A lot of work is already done in these examples, and with them, you can already do a lot of things. I create the folder &quot;examples&quot; where I put those python files.
Now follow the &quot;Before you begin&quot; instructions <a href="https://dialogflow-python-client-v2.readthedocs.io/en/latest/" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
Create a new agent in the project and add an intent from the GUI.
Connect to that agent initializing the dialogflow client from your python script and read the Intents already existent in the Agent.
It will be like:</p> <div class="language- extra-class"><pre class="language-text"><code>from examples import intent_management
os.environ[&quot;GOOGLE_APPLICATION_CREDENTIALS&quot;] = &lt;your path&gt;/&lt;your credentials file&gt;.json&quot;
projectID = &lt;your project id&gt;

client = dialogflow.IntentsClient()
parent = client.project_agent_path(projectID)
management.list_intents(parent)
</code></pre></div><p>It should return you a JSON with all the information requested (in this case, your existing intents).
JSON is the new de-facto standard for information representation, so <a href="https://www.w3schools.com/whatis/whatis_json.asp" target="_blank" rel="noopener noreferrer">get comfortable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> with it!</p> <p>So, you have these files with a wrapper for the low-level functions (in this case, the low-level function in the intent_management.py is called at line 40 inside the list_intent() function).</p> <p>These files are really useful to get started, but in the end, you want to have the most possible expressiveness and flexibility. So you want to master the lower level functions.</p> <h3 id="a-deeper-approach"><a href="#a-deeper-approach" class="header-anchor">#</a> A deeper approach</h3> <p>Try now to re-produce the Intent we have created with the lower level functions of the dialogflow module. You have here all the pieces of information you need, the <a href="https://cloud.google.com/dialogflow-enterprise/docs/reference/rest/v2-overview" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is really well done! In general, each time you want to communicate with the API you need to build a JSON (your request) and you'll receive a JSON (the response).</p> <h3 id="up-and-running-with-flask-and-webhooks"><a href="#up-and-running-with-flask-and-webhooks" class="header-anchor">#</a> Up and running with Flask and webhooks</h3> <p>Dialogflow's APIs allows you to take action on your own systems based on conversational input, embed your conversational interface into your app or website, and dynamically change your agent's behavior. Dialogflow APIs center around three primary use cases:</p> <ul><li>Fulfillment: take action on your own systems based on conversational input. You can do things like querying a database or API to provide info to your users with any integration (Actions on Google, Slack, etc.)</li> <li>Detect Intent API: Embed your conversational interface built with Dialogflow into your app, website or device. Call this API with a user's query to get back how your DIalogflow agent's response</li> <li>Agent API: Dynamically change your agent's behavior by editing your agent's intents, entities, and contexts. Do anything you can through Dialogflow console programmatically with Dialogflow's agent APIs.</li></ul> <p>Here you can see a clear schema.</p> <p><img src="https://raw.githubusercontent.com/dialogflow/resources/master/images/overview.png" alt="Figure 1-1" title="1"></p> <p>Basically, you want to have a .py file that builds the agent (with API calls), then your agent is ready to take in queries form the user and send them (once recognized the user query) to a backend application (your webhook). In our case, the app in the backend (the webhook) is built with Flask.</p> <p><strong>Fulfillment</strong> is code that's deployed as a webhook that lets your Dialogflow agent call business logic on an intent-by-intent basis. During a conversation, fulfillment allows you to use the information extracted by Dialogflow's natural language processing to generate dynamic responses or trigger actions on your back-end.</p> <p>Most Dialogflow agents make use of fulfillment to do things like: generate dynamic responses based on information looked up from a database, place orders based on products a customer has asked for, implement the rules and winning conditions for a game.</p> <h3 id="our-agent-but-with-api-calls"><a href="#our-agent-but-with-api-calls" class="header-anchor">#</a> Our agent, but with API calls</h3> <p>It's time to get our hands dirty again!
This time we're adding the backend application acting under the hood, and not the static answers anymore.
<a href="https://www.pragnakalp.com/dialogflow-fulfillment-webhook-tutorial/" target="_blank" rel="noopener noreferrer">Here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> you have a consistent and complete tutorial on how to run the Flask application on your machine (using Ngrok to expose he webhook on your machine, to the Web).
Now that you have the entire stack working, you can start creating any type of application!</p> <h3 id="deploying-our-chatbot"><a href="#deploying-our-chatbot" class="header-anchor">#</a> Deploying our chatbot</h3> <p>The smartest way to deploy your agent is through common communication channels like Facebook Messenger or Telegram.
<a href="https://hub.packtpub.com/creating-and-deploying-a-chatbot-using-dialogflow-tutorial/" target="_blank" rel="noopener noreferrer">Here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> you find a very comprehensive tutorial on how to deploy your chatbot application to the real worlds. It's easy, isn't it?</p> <h3 id="chatbot-tips-and-best-practices"><a href="#chatbot-tips-and-best-practices" class="header-anchor">#</a> Chatbot tips and best practices</h3> <p>I've collected here for you some best articles and StackOverflow questions containing best practices.</p> <ul><li><a href="https://dzone.com/articles/best-practices-for-lively-chatbots" target="_blank" rel="noopener noreferrer">1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://miningbusinessdata.com/automatically-generate-dialogflow-faq-chatbot-csv-file/" target="_blank" rel="noopener noreferrer">2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://www.comm100.com/blog/chatbot-best-worst-practices.html" target="_blank" rel="noopener noreferrer">3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://chatbotsmagazine.com/11-more-best-ux-practices-for-building-chatbots-67362d1104d9" target="_blank" rel="noopener noreferrer">4<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://thebrainfiles.wearebrain.com/chatbot-best-practice-learnings-and-insights-from-companies-like-abn-amro-booking-com-6e4c329c60a5" target="_blank" rel="noopener noreferrer">5<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://www.marutitech.com/8-best-practices-bot-development/" target="_blank" rel="noopener noreferrer">6<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://stackoverflow.com/questions/52426295/dialogflow-intent-lifespan-best-practice-and-performance" target="_blank" rel="noopener noreferrer">7<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p><a href="https://medium.com/the-mission/how-to-effectively-run-a-chatbot-development-project-a445d2d1170f" target="_blank" rel="noopener noreferrer">Here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://botpress.io/blog/successful-chatbot-projects-avoid-these-mistakes/" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> you find two guides on how to plan a chat for your business.</p> <h3 id="project-ideas"><a href="#project-ideas" class="header-anchor">#</a> Project Ideas</h3> <p>I've packed here for you a list of links with a lot of project ideas. Have fun!</p> <ul><li><a href="https://chatbotsmagazine.com/80-chatbot-ideas-for-enterprise-bots-4bb73281f593" target="_blank" rel="noopener noreferrer">1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://www.messengerpeople.com/best-of-8-chatbot-projects-you-will-love-to-discover/" target="_blank" rel="noopener noreferrer">2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://www.quora.com/What-are-some-cool-ideas-where-chat-bots-can-be-put-to-use" target="_blank" rel="noopener noreferrer">3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://www.wordstream.com/blog/ws/2017/10/04/chatbots" target="_blank" rel="noopener noreferrer">4<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://www.ideas2it.com/blogs/50-chatbot-use-cases/" target="_blank" rel="noopener noreferrer">5<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <hr> <p>Written by <em>clone95</em></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/Virgilio/assets/js/app.3b1af8ac.js" defer></script><script src="/Virgilio/assets/js/2.ca6f3911.js" defer></script><script src="/Virgilio/assets/js/3.c03bce7d.js" defer></script><script src="/Virgilio/assets/js/22.d16fb67a.js" defer></script>
  </body>
</html>
